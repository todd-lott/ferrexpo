<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferrexpo model</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#"><img src="logo.png" alt="Logo" style="height: 30px;"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav nav-tabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="inicio-tab" data-toggle="tab" href="#inicio" role="tab" aria-controls="inicio" aria-selected="true">Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="produccion-tab" data-toggle="tab" href="#produccion" role="tab" aria-controls="produccion" aria-selected="false">Producción</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="hierro-tab" data-toggle="tab" href="#hierro" role="tab" aria-controls="hierro" aria-selected="false">Hierro</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="costes-tab" data-toggle="tab" href="#costes" role="tab" aria-controls="costes" aria-selected="false">Costes</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="ingresos-tab" data-toggle="tab" href="#ingresos" role="tab" aria-controls="ingresos" aria-selected="false">Ingresos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="dividendo-tab" data-toggle="tab" href="#dividendo" role="tab" aria-controls="dividendo" aria-selected="false">Dividendo</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="acerca-tab" data-toggle="tab" href="#acerca" role="tab" aria-controls="acerca" aria-selected="false">Acerca de</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="tab-content" id="tab-content">
            <div class="tab-pane fade show active" id="inicio" role="tabpanel">
                <div class="container">
                <div class="d-flex justify-content-between">
                    <h1 class="mt-5" id="title">FXPO.L</h1>
                    <div class="text-right mt-5">
                        <p><strong>EPS:</strong> <span id="epsValue">0.00</span></p>
                        <p><strong>Dividend:</strong> <span id="dividendValue">0.00</span></p>
                        <p><strong>P/FCF:</strong> <span id="pfcfValue">0.00</span></p>
                    </div>
                </div>
                <p id="shareValue">Ferrexpo Quarterly Calculation Tool</p>

                <div class="d-flex flex-wrap justify-content-between mb-4">
                    <div class="range-container text-center mb-4 mx-2">
                        <input type="range" class="custom-range" id="premiumPellets" min="100" max="3000" value="980" oninput="updateLabel('premiumPellets', 'Premium pellets', 'kt')">
                        <small id="premiumPelletsLabel" style="display: inline-block; width: 140px; text-align: left;">Premium pellets (kt): 980</small>
                    </div>
                    <div class="range-container text-center mb-4 mx-2">
                        <input type="range" class="custom-range" id="drPellets" min="0" max="1000" value="1639" oninput="updateLabel('drPellets', 'DR pellets', 'kt')">
                        <small id="drPelletsLabel" style="display: inline-block; width: 140px; text-align: left;">DR pellets (kt): 1639</small>
                    </div>
                    <div class="range-container text-center mb-4 mx-2">
                        <input type="range" class="custom-range" id="ironOrePrice" min="0" max="250" value="180" oninput="updateLabel('ironOrePrice', 'Iron ore', '$')">
                        <small id="ironOrePriceLabel" style="display: inline-block; width: 140px; text-align: left;">Iron ore ($): 180</small>
                    </div>
                    <div class="range-container text-center mb-4 mx-2">
                        <input type="range" class="custom-range" id="cashCost" min="40" max="100" value="76.5" oninput="updateLabel('cashCost', 'Cash cost', '$')">
                        <small id="cashCostLabel" style="display: inline-block; width: 140px; text-align: left;">Cash cost ($): 76.5</small>
                    </div>
                </div>

                <div class="card mt-4">
                    <div class="card-body">
                        <canvas id="mySankeyChart" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>
            </div>
            <div class="tab-pane fade" id="produccion" role="tabpanel">
                <!-- Content for Producción tab -->
                <h1>Producción</h1>
                <canvas id="produccionChart" width="400" height="200"></canvas>
            </div>
            <div class="tab-pane fade" id="hierro" role="tabpanel">
                <!-- Content for Hierro tab -->
                <h1>Hierro</h1>
                <p>Welcome to the Hierro tab content.</p>
            </div>
            <div class="tab-pane fade" id="costes" role="tabpanel">
                <!-- Content for Costes tab -->
                <h1>Costes</h1>
                <p>Welcome to the Costes tab content.</p>
            </div>
            <div class="tab-pane fade" id="ingresos" role="tabpanel">
                <!-- Content for Ingresos tab -->
                <h1>Ingresos</h1>
                <p>Welcome to the Ingresos tab content.</p>
            </div>
            <div class="tab-pane fade" id="dividendo" role="tabpanel">
                <!-- Content for Dividendo tab -->
                <h1>Dividendo</h1>
                <p>Welcome to the Dividendo tab content.</p>
            </div>
            <div class="tab-pane fade" id="acerca" role="tabpanel">
                <!-- Content for Acerca de tab -->
                <h1>Acerca de</h1>
                <p>Welcome to the Acerca de tab content.</p>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                // Remove active class from all tabs
                $('a[data-toggle="tab"]').removeClass('active');
                // Add active class to the clicked tab
                $(e.target).addClass('active');

                var target = $(e.target).attr("href"); // Get the tab ID
                console.log("Tab shown: " + target);
            });
            updateLabel('premiumPellets', 'Premium pellets', 'kt');
            updateLabel('drPellets', 'DR pellets', 'kt');
            updateLabel('ironOrePrice', 'Iron ore', '$');
            updateLabel('cashCost', 'Cash cost', '$');
        });
    </script>
    <script>
    function updateLabel(rangeId, label, unit) {
        var rangeValue = document.getElementById(rangeId).value;
        rangeValue = Number(rangeValue).toLocaleString('en-US');
        document.getElementById(rangeId + 'Label').textContent = label + ' (' + unit + '): ' + rangeValue;
    }
    document.addEventListener('DOMContentLoaded', (event) => {
        var ctx = document.getElementById('produccionChart').getContext('2d');
        var produccionChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [
                    '1Q 2020', '2Q 2020', '3Q 2020', '4Q 2020', '1Q 2021', '2Q 2021', '3Q 2021', '4Q 2021', 
                    '1Q 2022', '2Q 2022', '3Q 2022', '4Q 2022', '1Q 2023', '2Q 2023', '3Q 2023', '4Q 2023', 
                    '1Q 2024', '2Q 2024'
                ],
                datasets: [
                    {
                        label: 'Total commercial production',
                        data: [
                            2725330, 2872600, 2537000, 3084000, 2779000, 2934000, 2680000, 3101000,
                            2713000, 2103000, 905000, 457000, 954000, 1172000, 1349000, 677000,
                            2054489, 1672506
                        ],
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        borderColor: 'rgba(0, 0, 0, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Total pellet production',
                        data: [
                            2725330, 2872600, 2537000, 3084000, 2714000, 2849000, 2596000, 3062000,
                            2713000, 2085000, 839000, 417000, 901000, 1066000, 1251000, 627000,
                            1813973, 1483468
                        ],
                        backgroundColor: 'rgba(255, 0, 0, 0.8)',
                        borderColor: 'rgba(255, 0, 0, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'DR pellets (FDP)',
                        data: [
                            0, 0, 0, 153000, 35000, 85000, 195000, 101000, 0, 90000,
                            263000, 0, 0, 0, 0, 0, 0, 0, 162645
                        ],
                        backgroundColor: 'rgba(0, 255, 0, 0.8)',
                        borderColor: 'rgba(0, 255, 0, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Ferrexpo premium pellets',
                        data: [
                            2652000, 2847900, 2537000, 2931000, 2679000, 2764000, 2401000, 2961000,
                            2713000, 1994000, 576000, 417000, 901000, 1066000, 1251000, 577000,
                            1731427, 1104904
                        ],
                        backgroundColor: 'rgba(0, 0, 255, 0.8)',
                        borderColor: 'rgba(0, 0, 255, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Other pellets (Ferrexpo basic pellets)',
                        data: [
                            73330, 24700, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                            82546, 215919
                        ],
                        backgroundColor: 'rgba(255, 165, 0, 0.8)',
                        borderColor: 'rgba(255, 165, 0, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Third party pellets from concentrate',
                        data: [
                            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 50000, 0
                        ],
                        backgroundColor: 'rgba(255, 255, 0, 0.8)',
                        borderColor: 'rgba(255, 255, 0, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Commercial concentrate production',
                        data: [
                            0, 0, 0, 0, 65000, 85000, 85000, 39000, 0, 19000, 65000, 40000,
                            53000, 106000, 98000, 50000, 240516, 189038
                        ],
                        backgroundColor: 'rgba(75, 192, 192, 0.8)',
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    });
    </script>
</body>
</html>

